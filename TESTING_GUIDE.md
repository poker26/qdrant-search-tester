# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏—Å—Ç–µ–º–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –û–±–∑–æ—Ä

–ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç–µ—Å—Ç–∞–º–∏ –ø–æ–∏—Å–∫–∞ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–∞—à–±–æ—Ä–¥–∞. –¢–µ—Å—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª `tests.json` –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ª–µ–≥–∫–æ —Å–æ–∑–¥–∞–Ω—ã, –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –∑–∞–ø—É—â–µ–Ω—ã.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–∞

–ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:

- **id** - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- **name** - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
- **query** - –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **expected_result_id** - ID —Ä–µ—Ü–µ–ø—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞–π–¥–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **expected_result_ids** - —Å–ø–∏—Å–æ–∫ ID, –æ–¥–∏–Ω –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞–π–¥–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **max_rank** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 3)
- **min_score** - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 0.3)
- **description** - –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

1. –û—Ç–∫—Ä–æ–π—Ç–µ –¥–∞—à–±–æ—Ä–¥ –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **"–¢–µ—Å—Ç—ã"**
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É **"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞–º–∏"**
3. –ù–∞–∂–º–∏—Ç–µ **"‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–µ—Å—Ç"**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - **–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞** - –Ω–∞–ø—Ä–∏–º–µ—Ä, "–ü–æ–∏—Å–∫ —Ä–µ—Ü–µ–ø—Ç–∞ –≤–æ–¥–∫–∏ –∏–∑ –∫–∞—Ä—Ç–æ—Ñ–µ–ª—è"
   - **–ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å** - –∑–∞–ø—Ä–æ—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   - **–û–∂–∏–¥–∞–µ–º—ã–π ID —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞** - ID —Ä–µ—Ü–µ–ø—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞–π–¥–µ–Ω
   - –ò–ª–∏ **—Å–ø–∏—Å–æ–∫ ID** - –µ—Å–ª–∏ –¥–æ–ø—É—Å—Ç–∏–º–æ –Ω–∞–π—Ç–∏ –ª—é–±–æ–π –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤
   - **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è** - –Ω–∞ –∫–∞–∫–æ–π –ø–æ–∑–∏—Ü–∏–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞–π–¥–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç (1 = –ø–µ—Ä–≤–æ–µ –º–µ—Å—Ç–æ)
   - **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π score** - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
5. –ù–∞–∂–º–∏—Ç–µ **"üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ—Å—Ç"**

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **"–¢–µ—Å—Ç—ã"** ‚Üí **"–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤"**
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ (–∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö)
3. –ù–∞–∂–º–∏—Ç–µ **"üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã"** –∏–ª–∏ **"‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ"**
4. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
   - –°–≤–æ–¥–∫–∞ –ø–æ –≤—Å–µ–º —Ç–µ—Å—Ç–∞–º
   - –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞
   - –¢–æ–ø-5 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞

## –°—Ç–∞—Ç—É—Å—ã —Ç–µ—Å—Ç–æ–≤

- **‚úÖ PASSED** - —Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω —É—Å–ø–µ—à–Ω–æ
- **‚ö†Ô∏è WARNING** - —Ç–µ—Å—Ç –Ω–∞–π–¥–µ–Ω, –Ω–æ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏ (–Ω–∏–∑–∫–∏–π score –∏–ª–∏ –ø–æ–∑–∏—Ü–∏—è –≤–Ω–µ –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞)
- **‚ùå FAILED** - –æ–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω

## –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç —Å –æ–¥–Ω–∏–º –æ–∂–∏–¥–∞–µ–º—ã–º ID

```json
{
  "id": "test_001",
  "name": "–ü–æ–∏—Å–∫ —Ä–µ—Ü–µ–ø—Ç–∞ –≤–æ–¥–∫–∏ –∏–∑ –∫–∞—Ä—Ç–æ—Ñ–µ–ª—è",
  "query": "—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è –∑–∞–ø–∞—Ä–∏–≤–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—Ñ–µ–ª—è",
  "expected_result_id": "vodka_potato_tech",
  "max_rank": 3,
  "min_score": 0.3,
  "description": "–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∏—Å–∫–∞ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏"
}
```

### –ü—Ä–∏–º–µ—Ä 2: –¢–µ—Å—Ç —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –¥–æ–ø—É—Å—Ç–∏–º—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

```json
{
  "id": "test_002",
  "name": "–ü–æ–∏—Å–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –≤–æ–¥–∫–∏",
  "query": "–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –≤–æ–¥–∫–∏",
  "expected_result_ids": ["vodka_potato_tech", "vodka_beetroot_tech", "vodka_topinambur_tech"],
  "max_rank": 5,
  "min_score": 0.25,
  "description": "–õ—é–±–æ–π –∏–∑ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –≤–æ–¥–∫–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞–π–¥–µ–Ω"
}
```

## –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–æ–º tests.json

–§–∞–π–ª `tests.json` —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

```json
{
  "version": "1.0",
  "updated_at": "2024-01-01T12:00:00",
  "tests": [
    {
      "id": "test_001",
      "name": "–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞",
      "query": "–ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å",
      "expected_result_id": "recipe_id",
      "max_rank": 3,
      "min_score": 0.3,
      "description": "–û–ø–∏—Å–∞–Ω–∏–µ",
      "created_at": "2024-01-01T12:00:00",
      "updated_at": "2024-01-01T12:00:00"
    }
  ]
}
```

–í—ã –º–æ–∂–µ—Ç–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É—é –∏–ª–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–∞—à–±–æ—Ä–¥–∞.

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
python qdrant_test_scripts/test-runner-v2.py

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã
python qdrant_test_scripts/test-runner-v2.py --tests test_001 test_002

# –£–∫–∞–∑–∞—Ç—å –¥—Ä—É–≥–æ–π —Ñ–∞–π–ª —Å —Ç–µ—Å—Ç–∞–º–∏
python qdrant_test_scripts/test-runner-v2.py --tests-file /path/to/tests.json
```

## –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã

–°—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ –∂–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –≤ `test-runner.py`. –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∞–π–ª `tests.json`.

–î–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤:

1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç—ã —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–∞—à–±–æ—Ä–¥–∞
2. –ò–ª–∏ –≤—Ä—É—á–Ω—É—é —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–µ—Å—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç `tests.json`

–°—Ç–∞—Ä—ã–π `test-runner.py` –≤—Å–µ –µ—â–µ –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `test-runner-v2.py`.
